<template>
  <lightning-quick-action-panel if:true={recordId} header="Estado de Cuenta">
    <div if:true={isLoading} class="slds-is-relative spinner-container">
      <lightning-spinner
        alternative-text="Loading..."
        variant="brand"
        size="medium"
      ></lightning-spinner>
    </div>
    <template if:false={isLoading}>
      <section if:true={isValid} class="content">
        Generación de estado de cuenta del cliente <b>{firstName} {lastName}</b>
        <br>
        Email del contacto: <b>{email}</b>

        <div class="pdf-container">
          <div class="slds-p-around_large">
            <!--IFRAME -->
            <iframe src={invoicePdfUrl} height="550" width="550"></iframe>
          </div>
        </div>

        <div slot="footer">
          <lightning-button
            variant="neutral"
            label="Cancelar"
            onclick={handleCancel}
          ></lightning-button>
          <lightning-button
            if:false={isSending}
            variant="brand"
            label="Guardar y Enviar"
            class="slds-m-left_x-small"
            onclick={handleSaveAndEmail}
          ></lightning-button>
          <lightning-button
            if:true={isSending}
            variant="brand"
            label="Cargando..."
            disabled
            class="slds-m-left_x-small"
          ></lightning-button>
        </div>
      </section>

      <div if:false={isValid} class="no-data">
        El estado de cuenta no se puede generar dado que la persona no cuenta
        con ningún pago asignado.
      </div></template
    >
  </lightning-quick-action-panel>
</template>
